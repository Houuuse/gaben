<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login â€¢ NOT Tom Harrison</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body class="login-body">
    <button
      class="login-appearance-toggle"
      type="button"
      aria-pressed="false"
      aria-label="Toggle between the original and clean login looks"
    >
      Try the clean look
    </button>
    <main class="login-page">
      <a class="login-back-link" href="/index.html">&larr; Back to home</a>
      <section class="login-card" aria-labelledby="login-title">
        <h1 id="login-title">Sign in</h1>
        <p class="login-subtitle">
          Log in to access the secret bits of NOT Tom Harrison's website.
        </p>
        <form class="login-form" action="/login.php" method="post">
          <label class="login-label" for="user">Username</label>
          <input
            class="login-input"
            type="text"
            id="user"
            name="username"
            autocomplete="username"
            required
          />

          <label class="login-label" for="pw">Password</label>
          <input
            class="login-input"
            type="password"
            id="pw"
            name="password"
            autocomplete="current-password"
            required
          />

          <div class="login-actions">
            <label class="remember-me">
              <input type="checkbox" name="remember" />
              <span>Remember me</span>
            </label>
            <a class="login-link" href="#">Forgot password?</a>
          </div>

          <button class="login-submit" type="submit">Log in</button>
        </form>
        <p class="login-footer">
          Don't have an account? <a class="login-link" href="#">Request access</a>.
        </p>
      </section>
    </main>
    <script>
      (function () {
        const toggleButton = document.querySelector(
          '.login-appearance-toggle'
        );
        if (!toggleButton) return;

        const body = document.body;
        const STORAGE_KEY = 'login-theme';

        const applyPreference = (modern) => {
          if (modern) {
            body.classList.add('login-modern');
            toggleButton.textContent = 'Return to classic look';
          } else {
            body.classList.remove('login-modern');
            toggleButton.textContent = 'Try the clean look';
          }

          toggleButton.setAttribute('aria-pressed', modern);
        };

        let storedPref = null;
        try {
          storedPref = window.localStorage.getItem(STORAGE_KEY);
        } catch (err) {
          storedPref = null;
        }

        if (storedPref === 'modern') {
          applyPreference(true);
        }

        toggleButton.addEventListener('click', () => {
          const wantsModern = !body.classList.contains('login-modern');
          applyPreference(wantsModern);

          try {
            if (wantsModern) {
              window.localStorage.setItem(STORAGE_KEY, 'modern');
            } else {
              window.localStorage.removeItem(STORAGE_KEY);
            }
          } catch (err) {
            // Ignore persistence issues (e.g., private browsing)
          }
        });
      })();
    </script>
  </body>
</html>
